<app-body>
  <div class="row">
    <div class="col-md-10 mx-auto my-3 text-center">
      <app-card *ngIf="ready; else loadingCard">
        <h4 class="card-title text-center">
          The Case of the {{case.name}}
          <a
            data-toggle="modal"
            href="#case-info"
          >
            <i class="fa fa-info-circle"></i>
          </a>
        </h4>
        <hr>

        <div id="pick-name" *ngIf="showNameChoice">
          <h4>
            <label for="name-input">
              Enter Your Name
            </label>
          </h4>
          <input class="form-control" type="text" id="name-input" name="playerName" [(ngModel)]="playerName"/>
          <br>
          <div class="alert alert-warning" *ngIf="!hasPlayerName">
            You must enter a name to continue.
          </div>
          <button
            class="btn btn-primary btn-large"
            (click)="pickName()"
            [disabled]="!hasPlayerName"
          >
            Continue
          </button>
        </div>

        <div id="pick-role" *ngIf="showRoleChoice">
          <h4>
            <label for="role-input">
              Choose a Role
            </label>
          </h4>
          <div id="role-input">
            <button class="btn btn-primary" (click)="pickJudge()">Pick Judge</button>
          </div>
          <br>
          <div class="alert alert-warning" *ngIf="!hasValidRole">
            You must pick a role to continue.
          </div>
          <button
            class="btn btn-primary btn-large"
            (click)="pickRole()"
            [disabled]="!hasValidRole"
          >
            Continue
          </button>

        </div>

        <div id="wait-for-other-roles" *ngIf="waitForOtherRoles">
          <ng-container [ngTemplateOutlet]="loadingSection"></ng-container>
          <app-cast></app-cast>
        </div>

      </app-card>
    </div>
  </div>
</app-body>

<app-basic-modal-box [boxId]="'case-info'" [title]="'Case Info'" *ngIf="ready">
  <h5>
    <i class="fa fa-calendar"></i>
    Case Timeline
  </h5>
  <p>Case opened on {{ case.openedDate | date }}.</p>
  <p *ngIf="case.closedDate">
    Case closed on {{ case.closedDate | date }}.
  </p>
  <hr>
  <h5>
    <i class="fa fa-link"></i>
    Shareable Link
  </h5>
  <p>
    {{
    caseLink
    }}
  </p>
</app-basic-modal-box>

<ng-template #loadingCard>
  <app-card>
    <ng-container [ngTemplateOutlet]="loadingSection"></ng-container>
  </app-card>
</ng-template>

<ng-template #loadingSection>
  <i class="fa fa-hourglass fa-spin fa-4x my-3"></i>
  <h5 class="card-title">
    Please wait...
  </h5>
</ng-template>
