<ng-container *ngIf="ready; else loading">
  <h3 class="text-center">Case Details</h3>
  <div class="CASE-OVERVIEW mb-3">
    <app-card [title]="'The Case of the ' + case.name" [icon]="'fa-tag'">
      <hr />
      <ng-container *ngIf="caseUnstarted">
        <h5>
          The Case will begin shortly...
        </h5>
      </ng-container>
      <ng-container *ngIf="!caseUnstarted">
        <h5>
          <i class="fa fa-book"></i>
          Issue: {{ case.issue.name }}
        </h5>
        <p>{{ case.issue.description }}</p>
      </ng-container>
      <ng-container *ngIf="caseClosed">
        <hr />
        <h5>
          <i class="fa fa-gavel"></i>
          The defendant was found
          <span *ngIf="caseClosed && !case.isDefendantGuilty">
            NOT
          </span>
          GUILTY.
        </h5>
      </ng-container>
    </app-card>
  </div>
  <div class="CASE-EVIDENCE mb-3" *ngIf="caseStarted || caseClosed">
    <app-card>
      <h5>
        <i class="fa fa-user-circle-o"></i>
        <i class="fa fa-search"></i>
        Plaintiff Evidence
      </h5>
      <h6 class="card-subtitle mb-2 text-muted">
        {{ case.revealedPlaintiffEvidence.length }} of
        {{
          case.revealedPlaintiffEvidence.length +
            case.unrevealedPlaintiffEvidence.length
        }}
        revealed
      </h6>
      <div class="card-text">
        <p *ngIf="case.revealedPlaintiffEvidence.length === 0">
          No plaintiff evidence has been revealed yet.
        </p>
        <ol>
          <li *ngFor="let evidence of case.revealedPlaintiffEvidence">
            {{ evidence.name }}
          </li>
        </ol>
      </div>
      <hr />
      <h5>
        <i class="fa fa-user-circle"></i>
        <i class="fa fa-search"></i>
        Defendant Evidence
      </h5>
      <h6 class="card-subtitle mb-2 text-muted">
        {{ case.revealedDefendantEvidence.length }} of
        {{
          case.revealedDefendantEvidence.length +
            case.unrevealedDefendantEvidence.length
        }}
        revealed
      </h6>
      <div class="card-text">
        <p *ngIf="case.revealedDefendantEvidence.length === 0">
          No defendant evidence has been revealed yet.
        </p>
        <ol>
          <li *ngFor="let evidence of case.revealedDefendantEvidence">
            {{ evidence.name }}
          </li>
        </ol>
      </div>
    </app-card>
  </div>
  <div class="CASE-ROLES mb-3">
    <app-card>
      <p class="my-0 py-0">
        <em>Starring...</em>
      </p>
      <ng-container *ngIf="hasJudgeName">
        <hr />
        <h5>
          {{ judgeName }}
          <em>
            as THE JUDGE
          </em>
          <i class="fa fa-balance-scale pull-right"></i>
        </h5>
      </ng-container>
      <ng-container *ngIf="hasPlaintiffName">
        <hr />
        <h5>
          {{ plaintiffName }}
          <em>
            as THE PLAINTIFF
          </em>
          <i class="fa fa-user-circle-o pull-right"></i>
        </h5>
      </ng-container>
      <ng-container *ngIf="hasDefendantName">
        <hr />
        <h5>
          {{ defendantName }}
          <em>
            as THE DEFENDANT
          </em>
          <i class="fa fa-user-circle pull-right"></i>
        </h5>
      </ng-container>
      <ng-container *ngIf="witnessesPresent">
        <hr />
        <h5>
          <em>
            And THE WITNESSES...
          </em>
          <i class="fa fa-users pull-right"></i>
        </h5>
        <br />
        <h5 *ngFor="let witness of witnesses">
          {{ witness.name }}
          <em> as {{ witness.character.name }} </em>
        </h5>
      </ng-container>
    </app-card>
  </div>
  <div class="CASE-TIMELINE mb-3">
    <app-card [title]="'Case Timeline'" [icon]="'fa-calendar'">
      <p>Case opened on {{ case.openedDate | date }}.</p>
      <p *ngIf="case.closedDate">
        Case closed on {{ case.closedDate | date }}.
      </p>
    </app-card>
  </div>
</ng-container>

<ng-template #loading>
  <app-loading></app-loading>
</ng-template>
